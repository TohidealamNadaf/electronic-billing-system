<ion-app>
  <ng-container *ngIf="isAppReady && !initError">
    <ion-menu contentId="main-content" type="overlay" class="custom-menu">
      <ion-content class="ion-no-padding menu-content">
        <div class="menu-header">
          <div class="logo-container">
            <div class="logo-icon">
              <!-- Simple Logo SVG -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                class="w-8 h-8 text-white">
                <path fill-rule="evenodd"
                  d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm14.25 6a.75.75 0 0 1-.22.53l-2.25 2.25a.75.75 0 1 1-1.06-1.06L15.44 12l-1.72-1.72a.75.75 0 1 1 1.06-1.06l2.25 2.25c.141.14.22.331.22.53Zm-10.28-.53a.75.75 0 0 0 0 1.06l2.25 2.25a.75.75 0 1 0 1.06-1.06L8.56 12l1.72-1.72a.75.75 0 1 0-1.06-1.06l-2.25 2.25Z"
                  clip-rule="evenodd" />
              </svg>
            </div>
            <div>
              <h1 class="font-display font-bold text-xl tracking-tight text-slate-900 dark:text-white">Billing App</h1>
              <span class="text-xs font-medium text-slate-500 dark:text-slate-400">Mobile Edition</span>
            </div>
          </div>
        </div>

        <div class="menu-items-container">
          <ion-menu-toggle auto-hide="false">

            <div class="menu-section-label">Create</div>

            <ion-item routerLink="/invoice-entry" routerDirection="root" lines="none" detail="false" class="menu-item"
              routerLinkActive="selected-item">
              <div class="item-icon-wrapper">
                <ion-icon name="add-circle-outline"></ion-icon>
              </div>
              <ion-label>New Invoice</ion-label>
            </ion-item>

            <ion-item routerLink="/estimate-entry" routerDirection="root" lines="none" detail="false" class="menu-item"
              routerLinkActive="selected-item">
              <div class="item-icon-wrapper">
                <ion-icon name="document-text-outline"></ion-icon>
              </div>
              <ion-label>New Estimate</ion-label>
            </ion-item>

            <div class="menu-section-label mt-4">Manage</div>

            <ion-item routerLink="/invoice-history" routerDirection="root" lines="none" detail="false" class="menu-item"
              routerLinkActive="selected-item">
              <div class="item-icon-wrapper">
                <ion-icon name="time-outline"></ion-icon>
              </div>
              <ion-label>Invoices</ion-label>
            </ion-item>

            <ion-item routerLink="/estimate-history" routerDirection="root" lines="none" detail="false"
              class="menu-item" routerLinkActive="selected-item">
              <div class="item-icon-wrapper">
                <ion-icon name="folder-open-outline"></ion-icon>
              </div>
              <ion-label>Estimates</ion-label>
            </ion-item>

            <ion-item routerLink="/client-management" routerDirection="root" lines="none" detail="false"
              class="menu-item" routerLinkActive="selected-item">
              <div class="item-icon-wrapper">
                <ion-icon name="people-outline"></ion-icon>
              </div>
              <ion-label>Clients</ion-label>
            </ion-item>

            <ion-item routerLink="/product-management" routerDirection="root" lines="none" detail="false"
              class="menu-item" routerLinkActive="selected-item">
              <div class="item-icon-wrapper">
                <ion-icon name="cube-outline"></ion-icon>
              </div>
              <ion-label>Products</ion-label>
            </ion-item>

            <div class="menu-spacer"></div>

            <ion-item routerLink="/settings" routerDirection="root" lines="none" detail="false"
              class="menu-item settings-item" routerLinkActive="selected-item">
              <div class="item-icon-wrapper">
                <ion-icon name="settings-outline"></ion-icon>
              </div>
              <ion-label>Settings</ion-label>
            </ion-item>

          </ion-menu-toggle>
        </div>
      </ion-content>

      <ion-footer class="ion-no-border menu-footer">
        <p>v1.0.0</p>
      </ion-footer>
    </ion-menu>
    <ion-router-outlet id="main-content"></ion-router-outlet>
  </ng-container>

  <div *ngIf="!isAppReady && !initError"
    style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #ffffff; color: #333; font-family: sans-serif; flex-direction: column;">
    <div class="spinner"
      style="border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite;">
    </div>
    <h2 style="margin-top: 20px;">Initializing App...</h2>
  </div>

  <div *ngIf="initError"
    style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #fff1f2; color: #9f1239; font-family: sans-serif; flex-direction: column; padding: 20px; text-align: center;">
    <h2 style="font-size: 24px; margin-bottom: 10px;">Initialization Error</h2>
    <p style="font-size: 16px; margin-bottom: 20px; max-width: 80%;">{{ initError }}</p>
    <button onclick="window.location.reload()"
      style="padding: 10px 20px; background: #be123c; color: white; border: none; border-radius: 4px; font-weight: bold;">Retry</button>
  </div>

  <style>
    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>
</ion-app>