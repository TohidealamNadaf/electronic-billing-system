<ion-app>
  <ion-menu contentId="main-content" type="overlay" class="custom-menu">
    <ion-content class="ion-no-padding">
      <div
        class="menu-header bg-gradient-to-br from-indigo-600 to-blue-700 p-6 flex flex-col justify-end h-40 text-white">
        <div class="font-display font-bold text-2xl tracking-tight">Billing App</div>
        <div class="text-indigo-100 text-sm mt-1 opacity-90">Mobile Edition</div>
      </div>

      <div class="py-2">
        <ion-menu-toggle auto-hide="false">
          <ion-item routerLink="/invoice-entry" routerDirection="root" lines="none" detail="false"
            class="menu-item transition-colors" routerLinkActive="selected-item">
            <ion-icon slot="start" name="add-circle-outline" class="text-xl"></ion-icon>
            <ion-label class="font-medium">New Invoice</ion-label>
          </ion-item>

          <ion-item routerLink="/invoice-history" routerDirection="root" lines="none" detail="false"
            class="menu-item transition-colors" routerLinkActive="selected-item">
            <ion-icon slot="start" name="time-outline" class="text-xl"></ion-icon>
            <ion-label class="font-medium">Invoice History</ion-label>
          </ion-item>

          <ion-item routerLink="/estimate-entry" routerDirection="root" lines="none" detail="false"
            class="menu-item transition-colors" routerLinkActive="selected-item">
            <ion-icon slot="start" name="document-text-outline" class="text-xl"></ion-icon>
            <ion-label class="font-medium">New Estimate</ion-label>
          </ion-item>

          <ion-item routerLink="/estimate-history" routerDirection="root" lines="none" detail="false"
            class="menu-item transition-colors" routerLinkActive="selected-item">
            <ion-icon slot="start" name="folder-open-outline" class="text-xl"></ion-icon>
            <ion-label class="font-medium">Estimate History</ion-label>
          </ion-item>

          <div class="h-px bg-slate-100 my-2 mx-4"></div>

          <ion-item routerLink="/client-management" routerDirection="root" lines="none" detail="false"
            class="menu-item transition-colors" routerLinkActive="selected-item">
            <ion-icon slot="start" name="people-outline" class="text-xl"></ion-icon>
            <ion-label class="font-medium">Clients</ion-label>
          </ion-item>

          <ion-item routerLink="/product-management" routerDirection="root" lines="none" detail="false"
            class="menu-item transition-colors" routerLinkActive="selected-item">
            <ion-icon slot="start" name="cube-outline" class="text-xl"></ion-icon>
            <ion-label class="font-medium">Products</ion-label>
          </ion-item>

          <ion-item routerLink="/settings" routerDirection="root" lines="none" detail="false"
            class="menu-item transition-colors" routerLinkActive="selected-item">
            <ion-icon slot="start" name="settings-outline" class="text-xl"></ion-icon>
            <ion-label class="font-medium">Settings</ion-label>
          </ion-item>
        </ion-menu-toggle>
      </div>
    </ion-content>

    <ion-footer class="ion-no-border">
      <div class="p-4 text-center text-xs text-slate-400">
        v1.0.0
      </div>
    </ion-footer>
  </ion-menu>
  <ion-router-outlet id="main-content" *ngIf="isAppReady && !initError"></ion-router-outlet>

  <div *ngIf="!isAppReady && !initError"
    style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #ffffff; color: #333; font-family: sans-serif; flex-direction: column;">
    <div class="spinner"
      style="border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite;">
    </div>
    <h2 style="margin-top: 20px;">Initializing App...</h2>
  </div>

  <div *ngIf="initError"
    style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #fff1f2; color: #9f1239; font-family: sans-serif; flex-direction: column; padding: 20px; text-align: center;">
    <h2 style="font-size: 24px; margin-bottom: 10px;">Initialization Error</h2>
    <p style="font-size: 16px; margin-bottom: 20px; max-width: 80%;">{{ initError }}</p>
    <button onclick="window.location.reload()"
      style="padding: 10px 20px; background: #be123c; color: white; border: none; border-radius: 4px; font-weight: bold;">Retry</button>
  </div>

  <style>
    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>
</ion-app>