<ion-header class="ion-no-border">
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title class="font-display font-medium">Settings</ion-title>
        <ion-buttons slot="end">
            <ion-button (click)="saveSettings()">
                <ion-spinner *ngIf="false" name="crescent"></ion-spinner> <!-- Todo: loading state -->
                <ion-icon name="checkmark-done-outline" *ngIf="successMessage()"></ion-icon>
                <span *ngIf="!successMessage()">Save</span>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
    <ion-toolbar color="light">
        <ion-segment [value]="activeTab()" (ionChange)="activeTab.set($event.detail.value! + '')">
            <ion-segment-button value="profile">
                <ion-label>Profile</ion-label>
            </ion-segment-button>
            <ion-segment-button value="prefs">
                <ion-label>Preferences</ion-label>
            </ion-segment-button>
        </ion-segment>
    </ion-toolbar>
</ion-header>

<ion-content class="bg-slate-50">
    <div class="p-4 space-y-4 max-w-md mx-auto">

        <!-- PROFILE TAB -->
        <div *ngIf="activeTab() === 'profile'" class="space-y-4">
            <div
                class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 dark:bg-slate-800 dark:border-slate-700">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-4">Identity</h3>

                <div class="space-y-3">
                    <div>
                        <label class="block text-xs font-semibold text-slate-500 mb-1">Company Name</label>
                        <input type="text" [(ngModel)]="settings.companyName"
                            class="w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-sm font-semibold focus:outline-none focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-slate-500 mb-1">Owner Name</label>
                        <input type="text" [(ngModel)]="settings.companyOwner"
                            class="w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-sm font-semibold focus:outline-none focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                    </div>
                </div>
            </div>

            <div
                class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 dark:bg-slate-800 dark:border-slate-700">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-4">Contact Details</h3>

                <div class="space-y-3">
                    <div>
                        <label class="block text-xs font-semibold text-slate-500 mb-1">Address</label>
                        <textarea [(ngModel)]="settings.companyAddress" rows="3"
                            class="w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-sm font-semibold focus:outline-none focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-slate-500 mb-1">Phone</label>
                        <input type="text" [(ngModel)]="settings.companyPhone"
                            class="w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-sm font-semibold focus:outline-none focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                    </div>
                </div>
            </div>
        </div>

        <!-- PREFERENCES TAB -->
        <div *ngIf="activeTab() === 'prefs'" class="space-y-4">
            <div
                class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 dark:bg-slate-800 dark:border-slate-700">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-4">Taxation</h3>

                <ion-item lines="none" class="rounded-lg mb-2 border border-slate-100 dark:border-slate-700">
                    <ion-label>Enable GST</ion-label>
                    <ion-toggle slot="end" [(ngModel)]="settings.isGstEnabled"></ion-toggle>
                </ion-item>

                <div *ngIf="settings.isGstEnabled" class="space-y-3 mt-2">
                    <div>
                        <label class="block text-xs font-semibold text-slate-500 mb-1">GST Rate</label>
                        <input type="text" [(ngModel)]="settings.gstRate"
                            class="w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-sm font-semibold focus:outline-none focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-slate-500 mb-1">GST Number</label>
                        <input type="text" [(ngModel)]="settings.gstNumber"
                            class="w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-sm font-semibold focus:outline-none focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                    </div>
                </div>
            </div>

            <div
                class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 dark:bg-slate-800 dark:border-slate-700">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wide">Terms & Conditions</h3>
                    <ion-toggle [(ngModel)]="settings.showTerms"></ion-toggle>
                </div>

                <textarea [disabled]="!settings.showTerms" [(ngModel)]="settings.termsAndConditions" rows="6"
                    class="w-full bg-slate-50 border border-slate-200 rounded px-3 py-2 text-sm font-semibold focus:outline-none focus:border-indigo-500 text-slate-600 dark:bg-slate-700 dark:border-slate-600 dark:text-white"
                    placeholder="Enter terms..."></textarea>
            </div>
        </div>

    </div>
</ion-content>